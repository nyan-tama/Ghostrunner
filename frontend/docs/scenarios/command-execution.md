# コマンド実行シナリオ

## 概要

Ghost Runner でコマンドを実行するユーザー操作シナリオ。

---

## シナリオ1: 単一ファイルを参照してコマンド実行

### 目的

1つのファイルを参照して plan や research などのコマンドを実行する。

### 前提条件

- プロジェクトパスが有効であること
- 開発フォルダ内にファイルが存在すること

### 操作フロー

1. **Project Path** にプロジェクトの絶対パスを入力
2. **Command** ドロップダウンでコマンドを選択（例: /plan）
3. **File** ドロップダウンでファイルを1つ選択
4. 選択したファイルがドロップダウン下にタグとして表示される
5. **Arguments** に実装内容の説明を入力
6. **Execute Command** ボタンをクリック
7. 進捗表示エリアにイベントが表示される
8. 完了後、結果が表示される

### 成功時

- 選択したファイルの内容を参照したコマンド結果が表示される
- 選択したファイルはタグリストに保持される

### エラー時

- エラーメッセージが赤色で表示される

---

## シナリオ2: 複数ファイルを参照してコマンド実行

### 目的

複数のファイル（資料と検討中ファイルなど）を同時に参照してコマンドを実行する。

### 前提条件

- プロジェクトパスが有効であること
- 開発フォルダ内に複数のファイルが存在すること

### 操作フロー

1. **Project Path** にプロジェクトの絶対パスを入力
2. **Command** ドロップダウンでコマンドを選択（例: /plan）
3. **File** ドロップダウンで1つ目のファイルを選択
4. 選択したファイルがタグとして表示される
5. **File** ドロップダウンで2つ目のファイルを選択
   - 既に選択済みのファイルはドロップダウン内で checkmark 付き・disabled 表示
6. 2つ目のファイルもタグとして追加される
7. 必要に応じて追加のファイルを選択
8. **Arguments** に実装内容の説明を入力
9. **Execute Command** ボタンをクリック
10. バックエンドに `file1.md file2.md file3.md 引数テキスト` の形式で送信される
11. 進捗表示エリアにイベントが表示される
12. 完了後、結果が表示される

### 成功時

- 選択した全ファイルの内容を参照したコマンド結果が表示される
- 選択したファイルはタグリストに保持される（次回実行時も利用可能）

### エラー時

- エラーメッセージが赤色で表示される

---

## シナリオ3: 選択済みファイルの削除

### 目的

誤って選択したファイル、または不要になったファイルをリストから削除する。

### 前提条件

- 1つ以上のファイルが選択されていること

### 操作フロー

1. 選択済みファイルのタグリストを確認
2. 削除したいファイルのタグ内の **x** ボタンをクリック
3. クリックしたファイルがリストから削除される
4. 必要に応じて他のファイルも削除
5. 全てのファイルを削除した場合、タグリストが非表示になる

### 成功時

- 削除したファイルがタグリストから消える
- ドロップダウン内の該当ファイルの checkmark と disabled が解除される

---

## シナリオ4: ファイルなしでコマンド実行

### 目的

ファイルを参照せずにコマンドを実行する。

### 前提条件

- プロジェクトパスが有効であること

### 操作フロー

1. **Project Path** にプロジェクトの絶対パスを入力
2. **Command** ドロップダウンでコマンドを選択
3. **File** は選択しない（または選択済みファイルを全て削除）
4. **Arguments** に説明を入力
5. **Execute Command** ボタンをクリック
6. バックエンドに引数テキストのみが送信される

### 成功時

- 引数のみを使用したコマンド結果が表示される

---

## シナリオ5: 同じファイルを使って連続実行

### 目的

同じファイルを参照して、異なる引数でコマンドを連続実行する。

### 前提条件

- 1回目のコマンド実行が完了していること
- ファイルが選択されていること

### 操作フロー

1. 1回目のコマンド実行が完了
2. 選択済みファイルがタグリストに保持されていることを確認
3. **Arguments** の内容を変更
4. **Execute Command** ボタンをクリック
5. 同じファイルを参照して2回目のコマンドが実行される

### 成功時

- 同じファイルを再選択することなく、連続してコマンドを実行できる

---

## ユースケース例

### 実装計画の作成

**使用コマンド**: /plan

**選択ファイル**:
- 開発/資料/仕様書.md
- 開発/検討中/機能案.md

**引数**: 新機能の実装計画を作成

**結果**: 両方のファイルを参照した実装計画が生成される

### フルスタック実装

**使用コマンド**: /fullstack

**選択ファイル**:
- 開発/資料/API仕様.md
- 開発/実装/実装待ち/機能_plan.md

**引数**: 計画に従って実装

**結果**: 資料と計画書を参照した実装が行われる

### 調査・リサーチ

**使用コマンド**: /research

**選択ファイル**:
- 開発/実装/実装待ち/新機能_plan.md
- 開発/アーカイブ/過去機能.md

**引数**: 重複がないか調査

**結果**: 新旧の内容を比較した調査結果が返される
